랩 ...

< 서버 설정 >

1. root 계정 잠금
2. php 파일 수정

< 스토리지 추가 > 4. 스토리지 생성 => 서버에 추가 5. 스토리지를 마운트 해보자. web001 서버에 접속해서 마운트 하기위한 폴더를 생성 => 생성항여 attach한 디스크에서 파티션 생성 => 생성한 파티션ㄴ을 포맷 => 마운트하기 위한 디렉터리 생성 후 파티션을 마운트, 데이터 생성 ! 6. 4번에서 스토리지를 생성해서 추가했던 디스크는 LVM 으로 구성하여 마운트한다. 7. 물리적인ㄴ 볼륨을 생성하고 8. 볼륨 그룹을 생성한다. 9. 논리적인 볼륨 (LVM 작업?) 생성한다. 10. 포맷 후 마운트한다.
(LVM? 두 개의 스토리지 지만 한개로 보이게 하는거인듯?)

< 스토리지 용량 증설 >

스토리지가 마운트 되어있는 상태에서는 증설이 불가하다. 일단 마운트를 해제한 이후 증설을 해보자.

1. unmount 를 통한 마운트 해제
2. growpart 라는 패키지를 설치한다.
3. lsblk 로 스토리지의 파티션 정보를 확인한다. (마운트가 되어있든 안되어있든 상관없이 모든 파티션 정보를 확인 가능)
4. 네클플랫폼에서 서버 연결을 해제한다. (스토리지가 '사용 가능' 상태가 됨)
5. 스토리지 크기 변경 ! => [확인] 눌러서 크기가 늘어난 것을 확인하자.
6. 다시 서버에 연결해준다.
7. 터미널에서 다시 lsblk 로 파티션 정보 확인. (증량한 스토리지가 보이는지 확인. 안 보이면 해당 서버를 재부팅 해야 한다.)
8. 증량한 스토리지가 확인이 되었다면 파티션에 적용해서 공간을 확장해야 함.
9. growpart 패키지로 파티션 공간을 확장한다.
10. 확장한 공간을 인식시키는 작업을 수행.
11. lsblk 로 파티션이 확장된 것을 확인했다면 최종적으로 마운트 해준다.

전 : <img src="images/스크린샷 2024-07-25 오후 12.40.32.png">
<br>
후 : <img src="images/스크린샷 2024-07-25 오후 12.41.32.png">
<br>
최종적으로, vdb1 디스크 용량이 늘어났다 !
<br>
<img src="images/스크린샷 2024-07-25 오후 12.42.56.png">

< 서버 스펙 변경 >

1. 서버를 정지해야 스펙 변경 가능
2. 네클플랫폼에서 정지 후 스펙 변경을 하면 된다.
3. 변경 후 재기동.

< Container Registry >

NCP 에서 제공하는, 도커를 활용한 이미지 저장 공간.

Docker 활용 - Dockerfile : 내가 원하는 이미지에 대한 description 을 넣는다.
<img src="images/스크린샷 2024-07-25 오후 2.25.43.png">

< 도커의 특징 >

- 일반 VM(virtual machine) 은 Hypervisor 라는게 필요하지만, 도커는 어떤 환경에서나 Docker Engine 이 설치되어 있으면 어떤 환경에서도 구동한다. = 이식성이 좋다 ! (도커 위에 컨테이너를 올린다... 도커 그림보면 고래 위에 컨테이너 있쟈나 그런 느낌)

- VM 은 구동하기 위해서는 OS 가 필요하지만, 컨테이너는 도커가 설치된 Host OS 의 커널을 공유한다. = VM 보다 경량화되어 있다 !

- 도커는 이미지를 층층히 관리한다. 우분투 Layer 위에 Apache 레이어를 올리고, 그 위에 Web app 레이어를 올린다. = 문제가 생긴 레이어만 수정하면 되니 효율ㄹ적인 이미짖 관리가 가능하다 !

< 도커, Container Registry 실습 !! >

1. 서버에 lab 소스 다운로드 및 Kubectl 설치
2. 컨테이너 레지스트리에서는 오브젝트 스토리지를 사용하기 때문에 그것을 생성하자.
3. 버킷 생성 후 컨테이너 레지스트리 생성 !

4. 터미널에서 lab_source 폴더로 들어가면 기본적인 도커 파일이 있고, 이것을 빌드하면 도커 이미지가 만들어진다.
5. 도커 이미지를 바탕으로 컨테이너를 구동시킨다. (run)
6. 컨테이너가 잘 구동되었는지 확인하려면 서버의 4000번 포트로 접근하면 된다.
7. 그 전에, ACG 에서 모든 아이피 대역에 대해서 TCP 4000번 포트를 허용해줘야 한다. (이걸 안하면 접속이 안됨)

8. 4000번 포트에서 컨테이너가 구동했는지 확인되면 새 이미지를 업로드해보자.
9. 터미널에서 컨테이너 레지스트리로 로그인 한다. (마이페이지 API key, secret key 로 로그인)
10. 컨테이너 레지스트리의 엔드포인트 정보를 확인하고 그 주소에 이미지를 업로드한다.
11. 업로드 후 push 해준다.

< NAS >

- 다수의 VM 이 공유 가능한 네트웤크 볼륨 디바이스
- 스냅샷 기능 제공 : 스냅샷 저장 시점으로 복원할 수 있다.

1. 네클플랫폼에서 NAS 생성 (web001 서버를 연결한다.)
2. 마운트 정보를 갖고 터미널에서 NAS 마운트.
3. 마운트까지 해줘야 NAS 를 사용할 수 있다.
4. 네클플랫폼에서 NAS 볼륨에서 스냅샷을 생성한다. (용량의 n% 로 설정할 수 있음)
5. 여기서 '즉시 스냅샷' 을 생성하면 해당 시점의 스냅샷이 보존된다.

< Network, Contents >
