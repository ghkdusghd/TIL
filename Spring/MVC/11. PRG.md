# 11. PRG(Post/Redirect/Get)

> ì›¹ ë¸Œë¼ìš°ì €ì˜ 'ìƒˆë¡œê³ ì¹¨'ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•œë‹¤. ì´ê²ƒì´ ë¬¸ì œê°€ ë  ë•Œê°€ ìˆëŠ”ë°, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰ í›„ ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì.
>
> <img src="images/07. PRG-01.png">
> <span style="color: #808080">ì¶œì²˜: ê¹€ì˜í•œì˜ ìŠ¤í”„ë§MVC (ì¸í”„ëŸ°)</span>
>
> ì˜ˆë¥¼ ë“¤ì–´ 'ìƒí’ˆ ë“±ë¡'ì„ í•œ ì´í›„ ê·¸ ìƒí’ˆì˜ 'ìƒì„¸í˜ì´ì§€'ë¡œ ë°”ë¡œ ì´ë™ì‹œí‚¨ë‹¤ê³  ê°€ì •í•˜ë©´, ì‚¬ìš©ìê°€ 'ìƒì„¸í˜ì´ì§€'ì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ ëˆ„ë¥¼ ê²½ìš°, ë§ˆì§€ë§‰ì— ìˆ˜í–‰í•œ ì‘ì—…ì¸ 'ìƒí’ˆ ë“±ë¡'ì´ ì¤‘ë³µìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ë²„ë¦°ë‹¤.

- ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•  ê²½ìš° ë¬¸ì œê°€ ë˜ëŠ” ê²ƒì´ë‹¤...

```java
 @PostMapping("/add")
 public String addItemV1(@ModelAttribute Item item) {

     //ìƒí’ˆ ì €ì¥
     itemRepository.save(item);
     //ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì „ì†¡
     return "basic/item";

}
```

### ğŸ’­ &nbsp; 'ìƒˆë¡œê³ ì¹¨ ë¬¸ì œ' ë¥¼ í•´ê²°í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ì§€ ... ?

### ğŸ’¡ &nbsp; ìƒí’ˆ ë“±ë¡ ì´í›„ì— ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì´ ì•„ë‹Œ, redirect í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤ !

> í•´ë‹µ !
>
> <img src="images/07. PRG-02.png">
> <span style="color: #808080">ì¶œì²˜: ê¹€ì˜í•œì˜ ìŠ¤í”„ë§MVC (ì¸í”„ëŸ°)</span>
>
> redirect ë¡œ í˜ì´ì§€ë¥¼ ì´ë™í•˜ê²Œ ë˜ë©´, ìƒˆë¡œê³ ì¹¨ì„ í–ˆì„ ë•Œ ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜í–‰í•œ ì‘ì—…ì´ GetMapping ì´ ë˜ê¸° ë•Œë¬¸ì— ìƒí’ˆ ë“±ë¡ì´ ì¤‘ë³µìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

- RedirectAttributes ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. pathVariable, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê¹Œì§€ ì²˜ë¦¬í•´ ì¤€ë‹¤.

```java
 @PostMapping("/add")
 public String addItemV2(@ModelAttribute Item item, RedirectAttributes redirectAttributes) {
     //ìƒí’ˆ ì €ì¥
     Item savedItem = itemRepository.save(item);
     //redirectí•  urlì— ìƒˆë¡œ ìƒì„±í•œ ì•„ì´í…œ idë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ê¸° ìœ„í•´ itemId ë¥¼ ì¶”ê°€í–ˆë‹¤.
     redirectAttributes.addAttribute("itemId", savedItem.getId());
     return "redirect:/basic/items/{itemId}";

}
```
